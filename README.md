<!-- badges: start -->

[![R-CMD-check](https://github.com/RConsortium/submissions-pilot1/workflows/R-CMD-check/badge.svg)](https://rconsortium.github.io/submissions-pilot1/)
<!-- badges: end -->

## Overview

The objective of the R Consortium R submission Pilot 3 Project is to expand on the work done in submission Pilot 1 by utilizing R to generate ADaM datasets.

All submission materials and communications from this pilot are publicly available, 
with the aim of providing a working example for future R language based FDA submissions.
This is a FDA-industry collaboration through the non-profit organization R consortium.

The [working group website](https://rconsortium.github.io/submissions-wg/).

The [RConsortium/submissions-pilot3-adam](https://github.com/RConsortium/submissions-pilot3-adam) repo demonstrates an approach to organize internal developed R function ADaM generation program using an R package. 

## FDA Response 

 - To be added when available

## Running Environment 

The project is developed and tested in the environment below:

- OS: Ubuntu 20.04
- R version: R4.2.1
- Snapshot date: 2022-11-01
- Snapshot repository: https://cran.microsoft.com/snapshot/2022-11-01

## Folder Structure 

The work in this repo is organized as an R package following the concepts discussed in:

- [Marwick, B., Boettiger, C., & Mullen, L. (2018). Packaging data analytical work reproducibly using R (and friends). The American Statistician, 72(1), 80-88.](https://peerj.com/preprints/3192/)
- [Wu, P., Palukuru, U. P., Luo, Y., Nepal, S., & Zhang, Y. (2021) Analysis and reporting in regulated clinical trial environment using R. PharmaSUG 2021](https://www.pharmasug.org/proceedings/2021/AD/PharmaSUG-2021-AD-079.pdf)

More details related to organize a clinical project and submission package can be found in Chapter 9-14
of the  [R for Clinical Study Reports and Submission](https://r4csr.org/index.html) book.

### R function and Analysis Scripts 

In short, the project is organized as an R package. 

- `pilot3.Rproj`: RStudio project file used to open RStudio project.
- `DESCRIPTION`: Metadata for a package including authors, license, dependency etc.
- `vignettes/`: Analysis scripts using RMarkdown.
- `R/`: Project specific R functions.
- `man/`: Manual of project specific R functions. 

### Datasets

The source dataset is in `sdtm/` folder. The original data is from [the PHUSE GitHub Repository](https://github.com/phuse-org/phuse-scripts/blob/master/data/adam/TDF_ADaM_v1.0.zip)

### Startup file 
- `.Rprofile`: Project startup file to setup running environment including R version, repository, folder path etc. 
  - We further use `inst/startup.R` and `R/zzz.R` to allow the startup file is executed while running. `devtools::load_all()` and RStudio build panel. 
  
### Results 

- `output/`: ADaM datasets generated by scripts in the `R/` folder.
- `output/`: TLFs output generated by RMarkdown files in `vignettes/` folder. 

### Reproducibility

The original code is prepared and executed on Ubuntu 20.04.3 LTS.
We use `renv` to ensure reproducibility for R version and R package version. 

- `renv.lock` and `renv/` folder: R package management using `renv` package. ([Introduction](https://rstudio.github.io/renv/articles/renv.html))

### Utilities

- `_pkgdown.yml`: [pkgdown](https://pkgdown.r-lib.org/articles/pkgdown.html) configuration file. test

