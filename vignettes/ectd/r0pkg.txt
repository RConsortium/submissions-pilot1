# Generated by pkglite: do not edit by hand
# Use pkglite::unpack() to restore the packages

Package: pilot1wrappers
File: .Rbuildignore
Format: text
Content:
  ^renv$
  ^renv\.lock$
  ^.*\.Rproj$
  ^\.Rproj\.user$
  ^pilot1wrappers\.Rcheck$
  ^pilot1wrappers.*\.tar\.gz$
  ^pilot1wrappers.*\.tgz$
  ^_pkgdown\.yml$
  ^docs$
  ^pkgdown$
  ^LICENSE.md$
  ^output$
  ^readme.md$
  ^adam$
  ^vignettes$
  ^\.github$

Package: pilot1wrappers
File: DESCRIPTION
Format: text
Content:
  Package: pilot1wrappers
  Type: Package
  Title: R Consortium R Submission Pilot 1
  Version: 0.0.1
  Authors@R: c(
          person("Yilong", "Zhang", email = "elong0527@gmail.com", role = c("aut", "cre")),
          person("Ning", "Leng", role = c("aut")),
          person("Mike", "Stackhouse", role = c("aut")),
          person("Peikun", "Wu", role = c("aut")),
          person("Heng", "Wang", role = c("aut")),
          person("Eli", "Miller", role = c("aut"))
         )
  Description: R Consortium R Submission Pilot 1. 
  Depends: R (>= 3.6.0)
  License: GPL (>= 3)
  Imports: 
      r2rtf,
      fs,
      rtables,
      dplyr,
      tidyr,
      emmeans,
      haven
  Suggests: 
      devtools,
      testthat,
      knitr,
      rmarkdown,
      rprojroot,
      sessioninfo
  Encoding: UTF-8
  LazyData: true
  Roxygen: list(markdown = TRUE)  
  RoxygenNote: 7.1.1

Package: pilot1wrappers
File: NAMESPACE
Format: text
Content:
  # Generated by roxygen2: do not edit by hand
  
  export(fmt_ci)
  export(fmt_est)
  export(fmt_num)
  export(fmt_pval)

Package: pilot1wrappers
File: README.md
Format: text
Content:
  <!-- badges: start -->
  
  [![R-CMD-check](https://github.com/RConsortium/submissions-pilot1/workflows/R-CMD-check/badge.svg)](https://rconsortium.github.io/submissions-pilot1/)
  <!-- badges: end -->
  
  ## Overview
  
  The objective of the R Cconsortium R submission Pilot 1 Project is to 
  test the concept that a R-language based submission package can meet 
  the needs and the expectations of the FDA reviewers, 
  including assessing code review and analyses reproducibility. 
  All submission materials and communications from this pilot is publicly available, 
  with the aim of providing a working example for future R language based FDA submissions.
  This is a FDA-industry collaboration through the non-profit organization R consortium.
  
  The [RConsortium/submissions-pilot1](https://github.com/RConsortium/submissions-pilot1) repo demonstrate an approach to organize internal developed R function and 
  table, listing, figure generation program using an R package. 
  
  The [RConsortium/submissions-pilot1-to-fda](https://github.com/RConsortium/submissions-pilot1-to-fda)
  repo demonstrate the eCTD submission package based on the [RConsortium/submissions-pilot1](https://github.com/RConsortium/submissions-pilot1) repo.  
  
  
  ## Folder Structure 
  
  The work in this repo is organized following the concepts discussed in:
  
  - [Marwick, B., Boettiger, C., & Mullen, L. (2018). Packaging data analytical work reproducibly using R (and friends). The American Statistician, 72(1), 80-88.](https://peerj.com/preprints/3192/)
  - [Wu, P., Palukuru, U. P., Luo, Y., Nepal, S., & Zhang, Y. (2021) Analysis and reporting in regulated clinical trial environment using R. PharmaSUG 2021](https://www.pharmasug.org/proceedings/2021/AD/PharmaSUG-2021-AD-079.pdf)
  
  ### R function and Analysis Scripts 
  
  In short, the project is organized as an R package. 
  
  - `pilot1wrappers.Rproj`: RStudio project file used to open RStudio project.
  - `DESCRIPTION`: Metadata for a package including authors, license, dependency etc.
  - `vignettes/`: Analysis scripts using Rmarkdown.
  - `R/`: Project specific R functions.
  - `man/`: Manual of project specific R functions. 
  
  ### Datasets
  
  The source dataset is in `adam\` folder. The original data is from [the PHUSE Github Repository](https://github.com/phuse-org/phuse-scripts/blob/master/data/adam/TDF_ADaM_v1.0.zip)
  
  ### Startup file 
  - `.Rprofile`: Project startup file to setup running environment including R version, repository, folder path etc. 
    - We further use `inst/startup.R` and `R/zzz.R` to allow the startup file is executed while running. `devtools::load_all()` and RStudio build panel. 
    
  ### Results 
  
  - `output\`: TLFs output generated by Rmarkdown files in `vignettes\` folder. 
  
  ### Reproducibility
  
  The original code is prepared and executed on Ubuntu 20.04.3 LTS
  We use `renv` to ensure reproducibility for R version and R package version. 
  
  - `renv.lock` and `renv\` folder: R package management using `renv` package. ([Introduction](https://rstudio.github.io/renv/articles/renv.html))
  
  ### Utilities
  
  - `_pkgdown.yml`: [pkgdown](https://pkgdown.r-lib.org/articles/pkgdown.html) configuration file
  

Package: pilot1wrappers
File: R/fmt.R
Format: text
Content:
  #' Format numeric value
  #'
  #' @inheritParams base::formatC
  #'
  #' @examples
  #' fmt_num(1.25, digits = 1)
  #' @export
  fmt_num <- function(x, digits, width = digits + 4) {
    formatC(x,
      digits = digits,
      format = "f",
      width = width
    )
  }
  
  #' Format point estimator
  #'
  #' @param .mean mean of an estimator.
  #' @param .sd sd of an estimator.
  #' @param digits number of digits for `.mean` and `.sd`.
  #'
  #' @examples
  #' fmt_est(1.25, 0.5)
  #' @export
  fmt_est <- function(.mean,
                      .sd,
                      digits = c(1, 2)) {
    .mean <- fmt_num(.mean, digits[1], width = digits[1] + 4)
    .sd <- fmt_num(.sd, digits[2], width = digits[2] + 3)
    paste0(.mean, " (", .sd, ")")
  }
  
  #' Format confidence interval
  #'
  #' @param .est an estimator.
  #' @param .lower lower confidence interval bound of an estimator.
  #' @param .upper upper confidence interval bound of an estimator.
  #' @param digits number of digits for `.est`, `.lower`, and `.upper`.
  #' @param width the total field width.
  #'
  #' @examples
  #' fmt_ci(1, -0.25, 1.32)
  #' @export
  fmt_ci <- function(.est,
                     .lower,
                     .upper,
                     digits = 2,
                     width = digits + 3) {
    .est <- fmt_num(.est, digits, width)
    .lower <- fmt_num(.lower, digits, width)
    .upper <- fmt_num(.upper, digits, width)
    paste0(.est, " (", .lower, ",", .upper, ")")
  }
  
  #' Format p-Value
  #'
  #' @param .p a p-value.
  #' @param digits number of digits for `.est`, `.lower`, and `.upper`.
  #'
  #' @examples
  #' fmt_pval(0.2)
  #' @export
  fmt_pval <- function(.p, digits = 3) {
    scale <- 10^(-1 * digits)
    p_scale <- paste0("<", digits)
    ifelse(.p < scale, p_scale, fmt_num(.p, digits = digits))
  }

Package: pilot1wrappers
File: R/package.R
Format: text
Content:
  #' @keywords internal
  "_PACKAGE"
  
  # The following block is used by usethis to automatically manage
  # roxygen namespace tags. Modify with care!
  ## usethis namespace: start
  ## usethis namespace: end
  NULL

Package: pilot1wrappers
File: R/zzz.R
Format: text
Content:
  # Modify with care!
  # The file is to load startup file automatically when the package is loaded.
  
  .onLoad <- function(libname, pkgname) {
    startup <- system.file("startup.R", package = pkgname)
  
    if (file.exists(startup)) {
      source(startup)
    } else {
      stop("Can not find", startup)
    }
  
    invisible(startup)
  }

Package: pilot1wrappers
File: man/fmt_ci.Rd
Format: text
Content:
  % Generated by roxygen2: do not edit by hand
  % Please edit documentation in R/fmt.R
  \name{fmt_ci}
  \alias{fmt_ci}
  \title{Format confidence interval}
  \usage{
  fmt_ci(.est, .lower, .upper, digits = 2, width = digits + 3)
  }
  \arguments{
  \item{.est}{an estimator.}
  
  \item{.lower}{lower confidence interval bound of an estimator.}
  
  \item{.upper}{upper confidence interval bound of an estimator.}
  
  \item{digits}{number of digits for \code{.est}, \code{.lower}, and \code{.upper}.}
  
  \item{width}{the total field width.}
  }
  \description{
  Format confidence interval
  }
  \examples{
  fmt_ci(1, -0.25, 1.32)
  }

Package: pilot1wrappers
File: man/fmt_est.Rd
Format: text
Content:
  % Generated by roxygen2: do not edit by hand
  % Please edit documentation in R/fmt.R
  \name{fmt_est}
  \alias{fmt_est}
  \title{Format point estimator}
  \usage{
  fmt_est(.mean, .sd, digits = c(1, 2))
  }
  \arguments{
  \item{.mean}{mean of an estimator.}
  
  \item{.sd}{sd of an estimator.}
  
  \item{digits}{number of digits for \code{.mean} and \code{.sd}.}
  }
  \description{
  Format point estimator
  }
  \examples{
  fmt_est(1.25, 0.5)
  }

Package: pilot1wrappers
File: man/fmt_num.Rd
Format: text
Content:
  % Generated by roxygen2: do not edit by hand
  % Please edit documentation in R/fmt.R
  \name{fmt_num}
  \alias{fmt_num}
  \title{Format numeric value}
  \usage{
  fmt_num(x, digits, width = digits + 4)
  }
  \arguments{
  \item{x}{an atomic numerical or character object, possibly
      \code{\link[base]{complex}} only for \code{prettyNum()}, typically a
      vector of real numbers.  Any class is discarded, with a warning.}
  
  \item{digits}{the desired number of digits after the decimal
      point (\code{format = "f"}) or \emph{significant} digits
      (\code{format = "g"}, \code{= "e"} or \code{= "fg"}).
  
      Default: 2 for integer, 4 for real numbers.  If less than 0,
      the C default of 6 digits is used.  If specified as more than 50, 50
      will be used with a warning unless \code{format = "f"} where it is
      limited to typically 324. (Not more than 15--21 digits need be
      accurate, depending on the OS and compiler used.  This limit is
      just a precaution against segfaults in the underlying C runtime.)
    }
  
  \item{width}{the total field width; if both \code{digits} and
      \code{width} are unspecified, \code{width} defaults to 1,
      otherwise to \code{digits + 1}.  \code{width = 0} will use
      \code{width = digits}, \code{width < 0} means left
      justify the number in this field (equivalent to \code{flag = "-"}).
      If necessary, the result will have more characters than
      \code{width}.  For character data this is interpreted in characters
      (not bytes nor display width).
    }
  }
  \description{
  Format numeric value
  }
  \examples{
  fmt_num(1.25, digits = 1)
  }

Package: pilot1wrappers
File: man/fmt_pval.Rd
Format: text
Content:
  % Generated by roxygen2: do not edit by hand
  % Please edit documentation in R/fmt.R
  \name{fmt_pval}
  \alias{fmt_pval}
  \title{Format p-Value}
  \usage{
  fmt_pval(.p, digits = 3)
  }
  \arguments{
  \item{.p}{a p-value.}
  
  \item{digits}{number of digits for \code{.est}, \code{.lower}, and \code{.upper}.}
  }
  \description{
  Format p-Value
  }
  \examples{
  fmt_pval(0.2)
  }

Package: pilot1wrappers
File: man/pilot1wrappers-package.Rd
Format: text
Content:
  % Generated by roxygen2: do not edit by hand
  % Please edit documentation in R/package.R
  \docType{package}
  \name{pilot1wrappers-package}
  \alias{pilot1wrappers}
  \alias{pilot1wrappers-package}
  \title{pilot1wrappers: R Consortium R Submission Pilot 1}
  \description{
  R Consortium R Submission Pilot 1.
  }
  \author{
  \strong{Maintainer}: Yilong Zhang \email{elong0527@gmail.com}
  
  Authors:
  \itemize{
    \item Ning Leng
    \item Mike Stackhouse
    \item Peikun Wu
    \item Heng Wang
    \item Eli Miller
  }
  
  }
  \keyword{internal}

